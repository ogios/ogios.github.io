import{N as M,a as z,n as U,B as E,F as G,E as N,t as e,b as D,c as X,m as W,V as P,i as K,T as Y,u as J,d as Q,e as Z,f as ee,S as te,H as F,g as ne,h as ie,G as oe,C as le,L as re,j as ae,k as se,l as ce,o as de,I as ue,p as pe,q as fe}from"./@tiptap-05fbaccf.js";import{x as _e,c as me,j as ge,t as he}from"./highlight.js-f63ffb7b.js";import{S as ve}from"./ant-design-vue-b9441150.js";import{_ as x}from"./index-27abbdca.js";import{al as u,o as s,a7 as C,a8 as m,b as c,c as f,a as _,ae as T,F as y,f as b,a3 as k,u as h,g as w,r as $e,ab as V,aa as H,a5 as be,n as Ce}from"./@vue-9c35b395.js";import{r as A}from"./remixicon-0d963432.js";import{T as ke}from"./prosemirror-state-196a664c.js";import{l as L}from"./lowlight-dcc438ad.js";const ye={components:{NodeViewWrapper:M,NodeViewContent:z,Select:ve},props:U,data(){return{languages:this.extension.options.lowlight.listLanguages()}},methods:{filterLanguage(i,t){return t.value.indexOf(i.toLowerCase())>=0}},computed:{selectedLanguage:{get(){return this.node.attrs.language},set(i){this.updateAttributes({language:i})}}}};const Ae={class:"lang"};function xe(i,t,n,o,r,l){const d=u("a-select-option"),a=u("a-select"),p=u("node-view-content"),g=u("node-view-wrapper");return s(),C(g,{class:"code-block"},{default:m(()=>[c("div",Ae,[f(a,{"show-search":"","dropdown-match-select-width":!1,contenteditable:!1,value:l.selectedLanguage,"onUpdate:value":t[0]||(t[0]=v=>l.selectedLanguage=v),"filter-option":l.filterLanguage,placeholder:"Choose language",style:{"min-width":"100px"}},{default:m(()=>[(s(!0),_(y,null,T(r.languages,(v,$)=>(s(),C(d,{key:$,label:v,value:v},null,8,["label","value"]))),128))]),_:1},8,["value","filter-option"])]),c("pre",null,[c("code",null,[f(p)])])]),_:1})}const Le=x(ye,[["render",xe]]),we=b({__name:"BubbleMenuComponent",props:{editor:{}},setup(i){return(t,n)=>(s(),_("div",null,[f(h(E),{class:"bubble-menu","tippy-options":{duration:100},editor:t.editor},{default:m(()=>[c("button",{onClick:n[0]||(n[0]=o=>t.editor.chain().focus().toggleBold().run()),class:k({"is-active":t.editor.isActive("bold")})}," Bold ",2),c("button",{onClick:n[1]||(n[1]=o=>t.editor.chain().focus().toggleItalic().run()),class:k({"is-active":t.editor.isActive("italic")})}," Italic ",2),c("button",{onClick:n[2]||(n[2]=o=>t.editor.chain().focus().toggleStrike().run()),class:k({"is-active":t.editor.isActive("strike")})}," Strike ",2)]),_:1},8,["editor"])]))}});const Te=b({__name:"FloatingMenuComponent",props:{editor:{}},setup(i){return(t,n)=>(s(),_("div",null,[f(h(G),{class:"floating-menu","tippy-options":{duration:100},editor:t.editor},{default:m(()=>[c("button",{onClick:n[0]||(n[0]=o=>t.editor.chain().focus().toggleHeading({level:1}).run()),class:k({"is-active":t.editor.isActive("heading",{level:1})})}," H1 ",2),c("button",{onClick:n[1]||(n[1]=o=>t.editor.chain().focus().toggleHeading({level:2}).run()),class:k({"is-active":t.editor.isActive("heading",{level:2})})}," H2 ",2),c("button",{onClick:n[2]||(n[2]=o=>t.editor.chain().focus().toggleBulletList().run()),class:k({"is-active":t.editor.isActive("bulletList")})}," Bullet List ",2)]),_:1},8,["editor"])]))}});const He=N.create({name:"smilieReplacer",addInputRules(){return[e({find:/-___- $/,replace:"😑 "}),e({find:/:'-\) $/,replace:"😂 "}),e({find:/':-\) $/,replace:"😅 "}),e({find:/':-D $/,replace:"😅 "}),e({find:/>:-\) $/,replace:"😆 "}),e({find:/-__- $/,replace:"😑 "}),e({find:/':-\( $/,replace:"😓 "}),e({find:/:'-\( $/,replace:"😢 "}),e({find:/>:-\( $/,replace:"😠 "}),e({find:/O:-\) $/,replace:"😇 "}),e({find:/0:-3 $/,replace:"😇 "}),e({find:/0:-\) $/,replace:"😇 "}),e({find:/0;\^\) $/,replace:"😇 "}),e({find:/O;-\) $/,replace:"😇 "}),e({find:/0;-\) $/,replace:"😇 "}),e({find:/O:-3 $/,replace:"😇 "}),e({find:/:'\) $/,replace:"😂 "}),e({find:/:-D $/,replace:"😃 "}),e({find:/':\) $/,replace:"😅 "}),e({find:/'=\) $/,replace:"😅 "}),e({find:/':D $/,replace:"😅 "}),e({find:/'=D $/,replace:"😅 "}),e({find:/>:\) $/,replace:"😆 "}),e({find:/>;\) $/,replace:"😆 "}),e({find:/>=\) $/,replace:"😆 "}),e({find:/;-\) $/,replace:"😉 "}),e({find:/\*-\) $/,replace:"😉 "}),e({find:/;-\] $/,replace:"😉 "}),e({find:/;\^\) $/,replace:"😉 "}),e({find:/B-\) $/,replace:"😎 "}),e({find:/8-\) $/,replace:"😎 "}),e({find:/B-D $/,replace:"😎 "}),e({find:/8-D $/,replace:"😎 "}),e({find:/:-\* $/,replace:"😘 "}),e({find:/:\^\* $/,replace:"😘 "}),e({find:/:-\) $/,replace:"🙂 "}),e({find:/-_- $/,replace:"😑 "}),e({find:/:-X $/,replace:"😶 "}),e({find:/:-# $/,replace:"😶 "}),e({find:/:-x $/,replace:"😶 "}),e({find:/>.< $/,replace:"😣 "}),e({find:/:-O $/,replace:"😮 "}),e({find:/:-o $/,replace:"😮 "}),e({find:/O_O $/,replace:"😮 "}),e({find:/>:O $/,replace:"😮 "}),e({find:/:-P $/,replace:"😛 "}),e({find:/:-p $/,replace:"😛 "}),e({find:/:-Þ $/,replace:"😛 "}),e({find:/:-þ $/,replace:"😛 "}),e({find:/:-b $/,replace:"😛 "}),e({find:/>:P $/,replace:"😜 "}),e({find:/X-P $/,replace:"😜 "}),e({find:/x-p $/,replace:"😜 "}),e({find:/':\( $/,replace:"😓 "}),e({find:/'=\( $/,replace:"😓 "}),e({find:/>:\\ $/,replace:"😕 "}),e({find:/>:\/ $/,replace:"😕 "}),e({find:/:-\/ $/,replace:"😕 "}),e({find:/:-. $/,replace:"😕 "}),e({find:/>:\[ $/,replace:"😞 "}),e({find:/:-\( $/,replace:"😞 "}),e({find:/:-\[ $/,replace:"😞 "}),e({find:/:'\( $/,replace:"😢 "}),e({find:/;-\( $/,replace:"😢 "}),e({find:/#-\) $/,replace:"😵 "}),e({find:/%-\) $/,replace:"😵 "}),e({find:/X-\) $/,replace:"😵 "}),e({find:/>:\( $/,replace:"😠 "}),e({find:/0:3 $/,replace:"😇 "}),e({find:/0:\) $/,replace:"😇 "}),e({find:/O:\) $/,replace:"😇 "}),e({find:/O=\) $/,replace:"😇 "}),e({find:/O:3 $/,replace:"😇 "}),e({find:/<\/3 $/,replace:"💔 "}),e({find:/:D $/,replace:"😃 "}),e({find:/=D $/,replace:"😃 "}),e({find:/;\) $/,replace:"😉 "}),e({find:/\*\) $/,replace:"😉 "}),e({find:/;\] $/,replace:"😉 "}),e({find:/;D $/,replace:"😉 "}),e({find:/B\) $/,replace:"😎 "}),e({find:/8\) $/,replace:"😎 "}),e({find:/:\* $/,replace:"😘 "}),e({find:/=\* $/,replace:"😘 "}),e({find:/:\) $/,replace:"🙂 "}),e({find:/=\] $/,replace:"🙂 "}),e({find:/=\) $/,replace:"🙂 "}),e({find:/:\] $/,replace:"🙂 "}),e({find:/:X $/,replace:"😶 "}),e({find:/:# $/,replace:"😶 "}),e({find:/=X $/,replace:"😶 "}),e({find:/=x $/,replace:"😶 "}),e({find:/:x $/,replace:"😶 "}),e({find:/=# $/,replace:"😶 "}),e({find:/:O $/,replace:"😮 "}),e({find:/:o $/,replace:"😮 "}),e({find:/:P $/,replace:"😛 "}),e({find:/=P $/,replace:"😛 "}),e({find:/:p $/,replace:"😛  "}),e({find:/=p $/,replace:"😛 "}),e({find:/:Þ $/,replace:"😛 "}),e({find:/:þ $/,replace:"😛 "}),e({find:/:b $/,replace:"😛 "}),e({find:/d: $/,replace:"😛 "}),e({find:/:\/ $/,replace:"😕 "}),e({find:/:\\ $/,replace:"😕 "}),e({find:/=\/ $/,replace:"😕 "}),e({find:/=\\ $/,replace:"😕 "}),e({find:/:L $/,replace:"😕 "}),e({find:/=L $/,replace:"😕 "}),e({find:/:\( $/,replace:"😞 "}),e({find:/:\[ $/,replace:"😞 "}),e({find:/=\( $/,replace:"😞 "}),e({find:/;\( $/,replace:"😢 "}),e({find:/D: $/,replace:"😨 "}),e({find:/:\$ $/,replace:"😳 "}),e({find:/=\$ $/,replace:"😳 "}),e({find:/#\) $/,replace:"😵 "}),e({find:/%\) $/,replace:"😵 "}),e({find:/X\) $/,replace:"😵 "}),e({find:/:@ $/,replace:"😠 "}),e({find:/<3 $/,replace:"❤️ "}),e({find:/\/shrug $/,replace:"¯\\_(ツ)_/¯"})]}}),Ie=D.create({name:"iframe",group:"block",atom:!0,addOptions(){return{allowFullscreen:!0,HTMLAttributes:{class:"iframe-wrapper"}}},addAttributes(){return{src:{default:null},frameborder:{default:0},allowfullscreen:{default:this.options.allowFullscreen,parseHTML:()=>this.options.allowFullscreen}}},parseHTML(){return[{tag:"iframe"}]},renderHTML({HTMLAttributes:i}){return["div",this.options.HTMLAttributes,["iframe",i]]},addCommands(){return{setIframe:i=>({tr:t,dispatch:n})=>{const{selection:o}=t,r=this.type.create(i);return n&&t.replaceRangeWith(o.from,o.to,r),!0}}}});const Me={props:{icon:{type:String,required:!0},title:{type:String,required:!0},action:{type:Function,required:!0},isActive:{type:Function,default:null}},data(){return{remixiconUrl:A}}},Be={class:"remix"},Se=["xlink:href"];function Fe(i,t,n,o,r,l){const d=u("el-tooltip");return s(),C(d,{key:0,content:n.title},{default:m(()=>[c("button",{class:k(["menu-item",{"is-active":n.isActive?n.isActive():null}]),onClick:t[0]||(t[0]=(...a)=>n.action&&n.action(...a))},[(s(),_("svg",Be,[c("use",{"xlink:href":`${r.remixiconUrl}#ri-${n.icon}`},null,8,Se)]))],2)]),_:1},8,["content"])}const Oe=x(Me,[["render",Fe]]),Re=c("p",null,"T",-1),Ue="Source Code Pro,DejaVu Sans Mono,Ubuntu Mono,Anonymous Pro,Droid Sans Mono,Menlo,Monaco,Consolas,Inconsolata,Courier,monospace,PingFang SC,Microsoft YaHei,sans-serif",Ne=b({__name:"FontSelectComponent",props:{editor:{}},setup(i){const t=i,n={"Times New Roman":"Times New Roman","Comic sans":"Comic Sans MS, Comic Sans",Georgia:"Georgia",Lora:"Lora",code:Ue,serif:"serif",无:"无"},o=w("无");function r(l,d){l==="无"?t.editor.chain().focus().unsetFontFamily().run():t.editor.chain().focus().setFontFamily(d.key).run()}return t.editor.on("selectionUpdate",({editor:l})=>{const d=l.getAttributes("textStyle");if(d.hasOwnProperty("fontFamily")){for(const a in n)if(n[a]===d.fontFamily){o.value=a;return}}o.value="无"}),(l,d)=>{const a=u("a-select-option"),p=u("a-select");return s(),C(p,{value:o.value,"onUpdate:value":d[0]||(d[0]=g=>o.value=g),onChange:r,"dropdown-match-select-width":!1,style:{"min-width":"120px"}},{suffixIcon:m(()=>[Re]),default:m(()=>[(s(),_(y,null,T(n,(g,v)=>f(a,{key:g,value:v},null,8,["value"])),64))]),_:1},8,["value"])}}}),De={key:0},Pe={class:"remix"},Ve=["xlink:href"],je={class:"table-control",style:{"max-width":"200px"}},qe=["disabled","onClick"],ze={class:"remix"},Ee=["xlink:href"],Ge="Table control",Xe=b({__name:"TableConfigComponent",props:{editor:{}},setup(i){const t=i,n=()=>{},o=$e([]),r=l=>{if(!l)return;o.splice(0,o.length);const d=[{icon:"table-line",title:"插入表",action:()=>t.editor.chain().focus().insertTable({rows:3,cols:3,withHeaderRow:!0}).run(),disabled:void 0},{icon:"insert-column-left",title:"添加列( 之前 )",action:()=>t.editor.chain().focus().addColumnBefore().run(),disabled:!t.editor.can().addColumnBefore()},{icon:"insert-column-right",title:"添加列( 之后 )",action:()=>t.editor.chain().focus().addColumnAfter().run(),disabled:!t.editor.can().addColumnAfter()},{icon:"delete-column",title:"删除列",action:()=>t.editor.chain().focus().deleteColumn().run(),disabled:!t.editor.can().deleteColumn()},{icon:"insert-row-top",title:"添加行( 之前 )",action:()=>t.editor.chain().focus().addRowBefore().run(),disabled:!t.editor.can().addRowBefore()},{icon:"insert-row-bottom",title:"添加行( 之后 )",action:()=>t.editor.chain().focus().addRowAfter().run(),disabled:!t.editor.can().addRowAfter()},{icon:"delete-row",title:"删除行",action:()=>t.editor.chain().focus().deleteRow().run(),disabled:!t.editor.can().deleteRow()},{icon:"delete-bin-line",title:"删除表",action:()=>t.editor.chain().focus().deleteTable().run(),disabled:!t.editor.can().deleteTable()},{icon:"merge-cells-horizontal",title:"合并单元格",action:()=>t.editor.chain().focus().mergeCells().run(),disabled:!t.editor.can().mergeCells()},{icon:"split-cells-horizontal",title:"分裂单元格",action:()=>t.editor.chain().focus().splitCell().run(),disabled:!t.editor.can().splitCell()},{icon:"layout-column-fill",title:"开关头列表",action:()=>t.editor.chain().focus().toggleHeaderColumn().run(),disabled:!t.editor.can().toggleHeaderColumn()},{icon:"layout-row-fill",title:"开关头行",action:()=>t.editor.chain().focus().toggleHeaderRow().run(),disabled:!t.editor.can().toggleHeaderRow()},{icon:"layout-bottom-2-line",title:"开关头单元格",action:()=>t.editor.chain().focus().toggleHeaderCell().run(),disabled:!t.editor.can().toggleHeaderCell()},{icon:"projector-line",title:"合并/分裂",action:()=>t.editor.chain().focus().mergeOrSplit().run(),disabled:!t.editor.can().mergeOrSplit()}];for(const a in d)o.push(d[a])};return(l,d)=>{const a=u("a-tooltip"),p=u("a-popover");return l.editor?(s(),_("div",De,[f(p,{placement:"bottom",title:Ge,trigger:"hover",onOpenChange:r,style:{"z-index":"999999"}},{content:m(()=>[c("div",je,[(s(!0),_(y,null,T(o,g=>(s(),C(a,{placement:"bottom"},{title:m(()=>[c("span",null,V(g.title),1)]),default:m(()=>[c("button",{disabled:g.disabled,class:"menu-item",onClick:g.action},[(s(),_("svg",ze,[c("use",{"xlink:href":`${h(A)}#ri-${g.icon}`},null,8,Ee)]))],8,qe)]),_:2},1024))),256))])]),default:m(()=>[c("button",{class:"menu-item",onClick:n},[(s(),_("svg",Pe,[c("use",{"xlink:href":`${h(A)}#ri-table-fill`},null,8,Ve)]))])]),_:1})])):H("",!0)}}});const We=x(Xe,[["__scopeId","data-v-b5d62d4a"]]),Ke={class:"remix"},Ye=["xlink:href"],Je="iframe",Qe=b({__name:"IframeComponent",props:{editor:{}},setup(i){const t=i,n=w(!1),o=w(""),r=()=>n.value=!0,l=()=>{o.value&&(t.editor.chain().focus().setIframe({src:o.value}).run(),n.value=!1)};return(d,a)=>{const p=u("el-tooltip"),g=u("a-input"),v=u("a-modal");return s(),_("div",null,[f(p,{content:"Add iframe"},{default:m(()=>[c("button",{class:"menu-item",onClick:r},[(s(),_("svg",Ke,[c("use",{"xlink:href":`${h(A)}#ri-tv-2-line`},null,8,Ye)]))])]),_:1}),f(v,{open:n.value,"onUpdate:open":a[1]||(a[1]=$=>n.value=$),title:Je,onOk:l},{default:m(()=>[f(g,{value:o.value,"onUpdate:value":a[0]||(a[0]=$=>o.value=$)},null,8,["value"])]),_:1},8,["open"])])}}}),Ze=b({__name:"ColorComponent",props:{editor:{}},setup(i){const t=i;let n=null;const o=r=>{n&&clearTimeout(n);const l=r.target.value;n=setTimeout(()=>{t.editor.chain().focus().setColor(l).run()},100)};return(r,l)=>{const d=u("a-input"),a=u("el-tooltip");return s(),C(a,{content:"Font color"},{default:m(()=>[f(d,{class:"color",value:r.editor.getAttributes("textStyle").color?r.editor.getAttributes("textStyle").color:"#000000",type:"color",onChange:o},null,8,["value"])]),_:1})}}});const et=x(Ze,[["__scopeId","data-v-0e6e4324"]]),tt={class:"remix"},nt=["xlink:href"],it="Add catalog",ot=b({__name:"CatalogMenuItem",props:{editor:{}},setup(i){const t=i,n=()=>{t.editor.chain().focus().setCatalog().run()};return(o,r)=>{const l=u("el-tooltip");return s(),C(l,{placement:"bottom",content:it,trigger:"hover"},{default:m(()=>[c("button",{class:"menu-item",onClick:n},[(s(),_("svg",tt,[c("use",{"xlink:href":`${h(A)}#ri-article-line`},null,8,nt)]))])]),_:1})}}}),lt={class:"remix"},rt=["xlink:href"],at=b({__name:"HighlightComponent",props:{editor:{}},setup(i){const t=i;let n=null;const o=l=>{const d=l.target.value;n&&clearTimeout(n),n=setTimeout(()=>{t.editor.chain().focus().setHighlight({color:d}).run()},100)},r=()=>{t.editor.chain().focus().unsetHighlight().run()};return(l,d)=>{const a=u("a-input"),p=u("el-tooltip");return s(),_(y,null,[f(p,{content:"Highlight color"},{default:m(()=>[f(a,{class:"color",value:l.editor.getAttributes("highlight").color?l.editor.getAttributes("highlight").color:"#000000",type:"color",onChange:o},null,8,["value"])]),_:1}),f(p,{content:"Remove highlight color"},{default:m(()=>[c("button",{class:"menu-item",onClick:r},[(s(),_("svg",lt,[c("use",{"xlink:href":`${h(A)}#ri-close-circle-line`},null,8,rt)]))])]),_:1})],64)}}});const st=x(at,[["__scopeId","data-v-ebb3f4bd"]]),ct={class:"remix"},dt=["xlink:href"],ut="link",pt=b({__name:"LinkComponent",props:{editor:{}},setup(i){const t=i,n=w(!1),o=w(""),r=()=>{n.value=!0,o.value=t.editor.getAttributes("link").href},l=()=>{o.value?t.editor.chain().focus().extendMarkRange("link").setLink({href:o.value,target:"_blank"}).run():o.value===""&&t.editor.chain().focus().extendMarkRange("link").unsetLink().run(),n.value=!1};return(d,a)=>{const p=u("el-tooltip"),g=u("a-input"),v=u("a-modal");return s(),_("div",null,[f(p,{content:"Add link"},{default:m(()=>[c("button",{class:k(`menu-item ${d.editor.isActive("link")?"is-active":""}`),onClick:r},[(s(),_("svg",ct,[c("use",{"xlink:href":`${h(A)}#ri-link`},null,8,dt)]))],2)]),_:1}),f(v,{open:n.value,"onUpdate:open":a[1]||(a[1]=$=>n.value=$),title:ut,onOk:l,onClick:l},{default:m(()=>[f(g,{value:o.value,"onUpdate:value":a[0]||(a[0]=$=>o.value=$)},null,8,["value"])]),_:1},8,["open"])])}}});const ft={components:{LinkComponent:pt,HighlightComponent:st,CatalogMenuItem:ot,ColorComponent:et,IframeComponent:Qe,TableConfigComponent:We,FontSelectComponent:Ne,MenuItem:Oe},props:{editor:{type:X,required:!0}},methods:{show(){console.log()}},data(){return{items:[{icon:"bold",title:"Bold",action:()=>this.editor.chain().focus().toggleBold().run(),isActive:()=>this.editor.isActive("bold")},{icon:"italic",title:"Italic",action:()=>this.editor.chain().focus().toggleItalic().run(),isActive:()=>this.editor.isActive("italic")},{icon:"strikethrough",title:"Strike",action:()=>this.editor.chain().focus().toggleStrike().run(),isActive:()=>this.editor.isActive("strike")},{icon:"code-view",title:"Code",action:()=>this.editor.chain().focus().toggleCode().run(),isActive:()=>this.editor.isActive("code")},{icon:"mark-pen-line",title:"Highlight",action:()=>this.editor.chain().focus().toggleHighlight().run(),isActive:()=>this.editor.isActive("highlight")},{type:"divider"},{icon:"h-1",title:"Heading 1",action:()=>this.editor.chain().focus().toggleHeading({level:1}).run(),isActive:()=>this.editor.isActive("heading",{level:1})},{icon:"h-2",title:"Heading 2",action:()=>this.editor.chain().focus().toggleHeading({level:2}).run(),isActive:()=>this.editor.isActive("heading",{level:2})},{icon:"paragraph",title:"Paragraph",action:()=>this.editor.chain().focus().setParagraph().run(),isActive:()=>this.editor.isActive("paragraph")},{icon:"list-unordered",title:"Bullet List",action:()=>this.editor.chain().focus().toggleBulletList().run(),isActive:()=>this.editor.isActive("bulletList")},{icon:"list-ordered",title:"Ordered List",action:()=>this.editor.chain().focus().toggleOrderedList().run(),isActive:()=>this.editor.isActive("orderedList")},{icon:"list-check-2",title:"Task List",action:()=>this.editor.chain().focus().toggleTaskList().run(),isActive:()=>this.editor.isActive("taskList")},{icon:"code-box-line",title:"Code Block",action:()=>this.editor.chain().focus().toggleCodeBlock().run(),isActive:()=>this.editor.isActive("codeBlock")},{type:"divider"},{icon:"double-quotes-l",title:"Blockquote",action:()=>this.editor.chain().focus().toggleBlockquote().run(),isActive:()=>this.editor.isActive("blockquote")},{icon:"separator",title:"Horizontal Rule",action:()=>this.editor.chain().focus().setHorizontalRule().run()},{type:"divider"},{icon:"text-wrap",title:"Hard Break",action:()=>this.editor.chain().focus().setHardBreak().run()},{icon:"format-clear",title:"Clear Format",action:()=>this.editor.chain().focus().clearNodes().unsetAllMarks().run()},{type:"divider"},{icon:"arrow-go-back-line",title:"Undo",action:()=>this.editor.chain().focus().undo().run()},{icon:"arrow-go-forward-line",title:"Redo",action:()=>this.editor.chain().focus().redo().run()},{type:"divider"},{icon:"align-left",title:"Align left",action:()=>this.editor.chain().focus().setTextAlign("left").run(),isActive:()=>this.editor.isActive({textAlign:"left"})},{icon:"align-center",title:"Align center",action:()=>this.editor.chain().focus().setTextAlign("center").run(),isActive:()=>this.editor.isActive({textAlign:"center"})},{icon:"align-right",title:"Align right",action:()=>this.editor.chain().focus().setTextAlign("right").run(),isActive:()=>this.editor.isActive({textAlign:"right"})},{icon:"align-justify",title:"Align justify",action:()=>this.editor.chain().focus().setTextAlign("justify").run(),isActive:()=>this.editor.isActive({textAlign:"justify"})}]}}},_t=c("div",{class:"divider"},null,-1),mt=c("div",{class:"divider"},null,-1),gt=c("div",{class:"divider"},null,-1),ht=c("div",{class:"divider"},null,-1),vt=c("div",{class:"divider"},null,-1),$t=c("div",{class:"divider"},null,-1);function bt(i,t,n,o,r,l){const d=u("menu-item"),a=u("FontSelectComponent"),p=u("TableConfigComponent"),g=u("LinkComponent"),v=u("IframeComponent"),$=u("ColorComponent"),j=u("HighlightComponent"),q=u("CatalogMenuItem");return s(),_("div",null,[(s(!0),_(y,null,T(r.items,(B,S)=>(s(),_(y,null,[B.type==="divider"?(s(),_("div",{key:`divider${S}`,class:"divider"})):(s(),C(d,be({key:S},B),null,16))],64))),256)),_t,f(a,{editor:n.editor},null,8,["editor"]),mt,f(p,{editor:n.editor},null,8,["editor"]),gt,f(g,{editor:n.editor},null,8,["editor"]),f(v,{editor:n.editor},null,8,["editor"]),ht,f($,{editor:n.editor},null,8,["editor"]),vt,f(j,{editor:n.editor},null,8,["editor"]),$t,f(q,{editor:n.editor},null,8,["editor"])])}const Ct=x(ft,[["render",bt]]),kt={class:"toc__list"},yt=["onClick"],At={components:{NodeViewWrapper:M},props:U,data(){return{headings:[]}},methods:{handleUpdate(){const i=[],t=this.editor.state.tr;this.editor.state.doc.descendants((n,o)=>{if(n.type.name==="heading"){const r=`heading-${i.length+1}`;n.attrs.id!==r&&t.setNodeMarkup(o,void 0,{...n.attrs,id:r}),i.push({level:n.attrs.level,text:n.textContent,id:r})}}),t.setMeta("addToHistory",!1),t.setMeta("preventUpdate",!0),this.editor.view.dispatch(t),this.headings=i}},mounted(){this.editor.on("update",this.handleUpdate),this.$nextTick(this.handleUpdate)}},xt=b({...At,__name:"index",setup(i){const t=(n,o)=>(console.log(o),Ce(()=>{if(console.log(n),n){let r=document.querySelector(`#${n}`);console.log(r),r&&(console.log("scrolling..."),r.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"}))}}),!1);return(n,o)=>(s(),C(h(M),{class:"toc"},{default:m(()=>[c("ul",kt,[(s(!0),_(y,null,T(n.headings,(r,l)=>(s(),_("li",{class:k(["toc__item",`toc__item--${r.level}`]),key:l},[c("a",{onClick:d=>t(r.id)},V(r.text),9,yt)],2))),128))])]),_:1}))}});const Lt=D.create({name:"tableOfContents",group:"block",atom:!0,parseHTML(){return[{tag:"toc"}]},renderHTML({HTMLAttributes:i}){return["toc",W(i)]},addNodeView(){return P(xt)},addGlobalAttributes(){return[{types:["heading"],attributes:{id:{default:null}}}]},addCommands(){return{setCatalog:()=>({tr:i,dispatch:t})=>{const{selection:n}=i,o=this.type.create();return t&&i.replaceRangeWith(n.from,n.to,o),!0}}}}),wt=N.create({name:"indent",addOptions(){return{names:["heading","paragraph"],indentRange:24,minIndentLevel:0,maxIndentLevel:24*10,defaultIndentLevel:0,HTMLAttributes:{}}},addGlobalAttributes(){return[{types:this.options.names,attributes:{indent:{default:this.options.defaultIndentLevel,renderHTML:i=>({style:`margin-left: ${i.indent}px!important;`}),parseHTML:i=>parseInt(i.style.marginLeft,10)||this.options.defaultIndentLevel}}}]},addCommands(){return{indent:()=>({tr:i,state:t,dispatch:n,editor:o})=>{const{selection:r}=t;return i=i.setSelection(r),i=O(i,this.options,o.extensionManager.extensions,"indent"),i.docChanged&&n?(n(i),!0):!1},outdent:()=>({tr:i,state:t,dispatch:n,editor:o})=>{const{selection:r}=t;return i=i.setSelection(r),i=O(i,this.options,o.extensionManager.extensions,"outdent"),i.docChanged&&n?(n(i),!0):!1}}},addKeyboardShortcuts(){return{Tab:R(),"Shift-Tab":I(!1),Backspace:I(!0),"Mod-]":R(),"Mod-[":I(!1)}},onUpdate(){const{editor:i}=this;if(i.isActive("listItem")){const t=i.state.selection.$head.node();t.attrs.indent&&i.commands.updateAttributes(t.type.name,{indent:0})}}}),Tt=(i,t,n)=>i<t?t:i>n?n:i;function Ht(i,t,n,o,r){if(!i.doc)return i;const l=i.doc.nodeAt(t);if(!l)return i;const d=Tt((l.attrs.indent||0)+n,o,r);if(d===l.attrs.indent)return i;const a={...l.attrs,indent:d};return i.setNodeMarkup(t,l.type,a,l.marks)}const O=(i,t,n,o)=>{const{doc:r,selection:l}=i;if(!r||!l||!(l instanceof ke))return i;const{from:d,to:a}=l;return r.nodesBetween(d,a,(p,g)=>t.names.includes(p.type.name)?(i=Ht(i,g,t.indentRange*(o==="indent"?1:-1),t.minIndentLevel,t.maxIndentLevel),!1):!K(p.type.name,n)),i},R=()=>({editor:i})=>i.can().sinkListItem("listItem")?i.chain().focus().sinkListItem("listItem").run():i.chain().focus().indent().run(),I=i=>({editor:t})=>i&&t.state.selection.$head.parentOffset>0?!1:(!i||t.state.selection.$head.parentOffset>0)&&t.can().liftListItem("listItem")?t.chain().focus().liftListItem("listItem").run():t.chain().focus().outdent().run(),It={class:"in-editor-wrapper"},Mt={key:0,class:"editor"},Bt={key:0},St={},jt=b({...St,__name:"TextEditor",props:{editable:{type:Boolean},content:{}},emits:["monitorSize"],setup(i,{expose:t,emit:n}){const o=i;L.registerLanguage("html",_e),L.registerLanguage("css",me),L.registerLanguage("js",ge),L.registerLanguage("ts",he);const r=Y.extend({addAttributes(){var a;return{...(a=this.parent)==null?void 0:a.call(this),backgroundColor:{default:null,parseHTML:p=>p.getAttribute("data-background-color"),renderHTML:p=>({"data-background-color":p.backgroundColor,style:`background-color: ${p.backgroundColor}`})}}}});console.log("props.content",o.content);const l=J({editable:o.editable,content:o.content,extensions:[Ie,He,Q,Z,ee,te,F,ne,ie,oe,le,wt,re.configure({HTMLAttributes:{class:"editor-link"},autolink:!1}),Lt,ae.configure({types:["heading","paragraph"]}),F.configure({multicolor:!0}),se.configure({resizable:!0}),ce,de,r,ue.configure({allowBase64:!0,inline:!0}),pe.extend({addNodeView(){return P(Le)}}).configure({lowlight:L,exitOnArrowDown:!0,defaultLanguage:"plaintext"})],onUpdate:(()=>{let a=null;return({editor:p})=>{a&&clearTimeout(a),a=setTimeout(()=>{n("monitorSize",new Blob([p.getHTML()]).size)},300)}})()});return t({updateContent:a=>{var p;(p=l.value)==null||p.commands.setContent(a)},editor:l}),(a,p)=>{const g=u("el-affix");return s(),_("div",It,[h(l)?(s(),_("div",Mt,[a.editable?(s(),_("div",Bt,[a.editable&&h(l)?(s(),C(g,{key:0,offset:0,target:".in-editor-wrapper"},{default:m(()=>[f(Ct,{class:"editor__header",editor:h(l)},null,8,["editor"])]),_:1})):H("",!0),f(we,{editor:h(l)},null,8,["editor"]),f(Te,{editor:h(l)},null,8,["editor"])])):H("",!0),f(h(fe),{class:"editor__content tiptap",editor:h(l)},null,8,["editor"])])):H("",!0)])}}});export{jt as _};
