function _(t){return t.split("-")[1]}function rt(t){return t==="y"?"height":"width"}function j(t){return t.split("-")[0]}function z(t){return["top","bottom"].includes(j(t))?"x":"y"}function U(t,e,o){let{reference:n,floating:i}=t;const r=n.x+n.width/2-i.width/2,l=n.y+n.height/2-i.height/2,c=z(e),f=rt(c),s=n[f]/2-i[f]/2,p=c==="x";let u;switch(j(e)){case"top":u={x:r,y:n.y-i.height};break;case"bottom":u={x:r,y:n.y+n.height};break;case"right":u={x:n.x+n.width,y:l};break;case"left":u={x:n.x-i.width,y:l};break;default:u={x:n.x,y:n.y}}switch(_(e)){case"start":u[c]-=s*(o&&p?-1:1);break;case"end":u[c]+=s*(o&&p?-1:1)}return u}const yt=async(t,e,o)=>{const{placement:n="bottom",strategy:i="absolute",middleware:r=[],platform:l}=o,c=r.filter(Boolean),f=await(l.isRTL==null?void 0:l.isRTL(e));let s=await l.getElementRects({reference:t,floating:e,strategy:i}),{x:p,y:u}=U(s,n,f),a=n,d={},g=0;for(let h=0;h<c.length;h++){const{name:m,fn:y}=c[h],{x,y:T,data:V,reset:b}=await y({x:p,y:u,initialPlacement:n,placement:a,strategy:i,middlewareData:d,rects:s,platform:l,elements:{reference:t,floating:e}});p=x??p,u=T??u,d={...d,[m]:{...d[m],...V}},b&&g<=50&&(g++,typeof b=="object"&&(b.placement&&(a=b.placement),b.rects&&(s=b.rects===!0?await l.getElementRects({reference:t,floating:e,strategy:i}):b.rects),{x:p,y:u}=U(s,a,f)),h=-1)}return{x:p,y:u,placement:a,strategy:i,middlewareData:d}};function lt(t,e){return typeof t=="function"?t(e):t}function xt(t){return typeof t!="number"?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(t):{top:t,right:t,bottom:t,left:t}}function ct(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}const X=Math.min,wt=Math.max;function bt(t,e,o){return wt(t,X(e,o))}const Ct=t=>({name:"arrow",options:t,async fn(e){const{x:o,y:n,placement:i,rects:r,platform:l,elements:c}=e,{element:f,padding:s=0}=lt(t,e)||{};if(f==null)return{};const p=xt(s),u={x:o,y:n},a=z(i),d=rt(a),g=await l.getDimensions(f),h=a==="y",m=h?"top":"left",y=h?"bottom":"right",x=h?"clientHeight":"clientWidth",T=r.reference[d]+r.reference[a]-u[a]-r.floating[d],V=u[a]-r.reference[a],b=await(l.getOffsetParent==null?void 0:l.getOffsetParent(f));let W=b?b[x]:0;W&&await(l.isElement==null?void 0:l.isElement(b))||(W=c.floating[x]||r.floating[d]);const mt=T/2-V/2,G=W/2-g[d]/2-1,I=X(p[m],G),J=X(p[y],G),O=I,K=W-g[d]-J,S=W/2-g[d]/2+mt,N=bt(O,S,K),Q=_(i)!=null&&S!=N&&r.reference[d]/2-(S<O?I:J)-g[d]/2<0?S<O?O-S:K-S:0;return{[a]:u[a]-Q,data:{[a]:N,centerOffset:S-N+Q}}}}),vt=["top","right","bottom","left"];vt.reduce((t,e)=>t.concat(e,e+"-start",e+"-end"),[]);const Et=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:o,y:n}=e,i=await async function(r,l){const{placement:c,platform:f,elements:s}=r,p=await(f.isRTL==null?void 0:f.isRTL(s.floating)),u=j(c),a=_(c),d=z(c)==="x",g=["left","top"].includes(u)?-1:1,h=p&&d?-1:1,m=lt(l,r);let{mainAxis:y,crossAxis:x,alignmentAxis:T}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...m};return a&&typeof T=="number"&&(x=a==="end"?-1*T:T),d?{x:x*h,y:y*g}:{x:y*g,y:x*h}}(e,t);return{x:o+i.x,y:n+i.y,data:i}}}};function w(t){var e;return((e=t.ownerDocument)==null?void 0:e.defaultView)||window}function v(t){return w(t).getComputedStyle(t)}function st(t){return t instanceof w(t).Node}function E(t){return st(t)?(t.nodeName||"").toLowerCase():"#document"}function L(t){return t instanceof w(t).HTMLElement}function R(t){return t instanceof w(t).Element}function Z(t){return typeof ShadowRoot<"u"&&(t instanceof w(t).ShadowRoot||t instanceof ShadowRoot)}function k(t){const{overflow:e,overflowX:o,overflowY:n,display:i}=v(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+o)&&!["inline","contents"].includes(i)}function Lt(t){return["table","td","th"].includes(E(t))}function Y(t){const e=q(),o=v(t);return o.transform!=="none"||o.perspective!=="none"||!!o.containerType&&o.containerType!=="normal"||!e&&!!o.backdropFilter&&o.backdropFilter!=="none"||!e&&!!o.filter&&o.filter!=="none"||["transform","perspective","filter"].some(n=>(o.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(o.contain||"").includes(n))}function q(){return!(typeof CSS>"u"||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function M(t){return["html","body","#document"].includes(E(t))}const tt=Math.min,H=Math.max,P=Math.round,$=t=>({x:t,y:t});function ft(t){const e=v(t);let o=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const i=L(t),r=i?t.offsetWidth:o,l=i?t.offsetHeight:n,c=P(o)!==r||P(n)!==l;return c&&(o=r,n=l),{width:o,height:n,$:c}}function ut(t){return R(t)?t:t.contextElement}function D(t){const e=ut(t);if(!L(e))return $(1);const o=e.getBoundingClientRect(),{width:n,height:i,$:r}=ft(e);let l=(r?P(o.width):o.width)/n,c=(r?P(o.height):o.height)/i;return l&&Number.isFinite(l)||(l=1),c&&Number.isFinite(c)||(c=1),{x:l,y:c}}const et=$(0);function at(t,e,o){var n,i;if(e===void 0&&(e=!0),!q())return et;const r=t?w(t):window;return!o||e&&o!==r?et:{x:((n=r.visualViewport)==null?void 0:n.offsetLeft)||0,y:((i=r.visualViewport)==null?void 0:i.offsetTop)||0}}function F(t,e,o,n){e===void 0&&(e=!1),o===void 0&&(o=!1);const i=t.getBoundingClientRect(),r=ut(t);let l=$(1);e&&(n?R(n)&&(l=D(n)):l=D(t));const c=at(r,o,n);let f=(i.left+c.x)/l.x,s=(i.top+c.y)/l.y,p=i.width/l.x,u=i.height/l.y;if(r){const a=w(r),d=n&&R(n)?w(n):n;let g=a.frameElement;for(;g&&n&&d!==a;){const h=D(g),m=g.getBoundingClientRect(),y=getComputedStyle(g),x=m.left+(g.clientLeft+parseFloat(y.paddingLeft))*h.x,T=m.top+(g.clientTop+parseFloat(y.paddingTop))*h.y;f*=h.x,s*=h.y,p*=h.x,u*=h.y,f+=x,s+=T,g=w(g).frameElement}}return ct({width:p,height:u,x:f,y:s})}function C(t){return((st(t)?t.ownerDocument:t.document)||window.document).documentElement}function B(t){return R(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function dt(t){return F(C(t)).left+B(t).scrollLeft}function A(t){if(E(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Z(t)&&t.host||C(t);return Z(e)?e.host:e}function ht(t){const e=A(t);return M(e)?t.ownerDocument?t.ownerDocument.body:t.body:L(e)&&k(e)?e:ht(e)}function pt(t,e){var o;e===void 0&&(e=[]);const n=ht(t),i=n===((o=t.ownerDocument)==null?void 0:o.body),r=w(n);return i?e.concat(r,r.visualViewport||[],k(n)?n:[]):e.concat(n,pt(n))}function nt(t,e,o){let n;if(e==="viewport")n=function(i,r){const l=w(i),c=C(i),f=l.visualViewport;let s=c.clientWidth,p=c.clientHeight,u=0,a=0;if(f){s=f.width,p=f.height;const d=q();(!d||d&&r==="fixed")&&(u=f.offsetLeft,a=f.offsetTop)}return{width:s,height:p,x:u,y:a}}(t,o);else if(e==="document")n=function(i){const r=C(i),l=B(i),c=i.ownerDocument.body,f=H(r.scrollWidth,r.clientWidth,c.scrollWidth,c.clientWidth),s=H(r.scrollHeight,r.clientHeight,c.scrollHeight,c.clientHeight);let p=-l.scrollLeft+dt(i);const u=-l.scrollTop;return v(c).direction==="rtl"&&(p+=H(r.clientWidth,c.clientWidth)-f),{width:f,height:s,x:p,y:u}}(C(t));else if(R(e))n=function(i,r){const l=F(i,!0,r==="fixed"),c=l.top+i.clientTop,f=l.left+i.clientLeft,s=L(i)?D(i):$(1);return{width:i.clientWidth*s.x,height:i.clientHeight*s.y,x:f*s.x,y:c*s.y}}(e,o);else{const i=at(t);n={...e,x:e.x-i.x,y:e.y-i.y}}return ct(n)}function gt(t,e){const o=A(t);return!(o===e||!R(o)||M(o))&&(v(o).position==="fixed"||gt(o,e))}function ot(t,e){return L(t)&&v(t).position!=="fixed"?e?e(t):t.offsetParent:null}function it(t,e){const o=w(t);if(!L(t))return o;let n=ot(t,e);for(;n&&Lt(n)&&v(n).position==="static";)n=ot(n,e);return n&&(E(n)==="html"||E(n)==="body"&&v(n).position==="static"&&!Y(n))?o:n||function(i){let r=A(i);for(;L(r)&&!M(r);){if(Y(r))return r;r=A(r)}return null}(t)||o}function Tt(t,e,o){const n=L(e),i=C(e),r=o==="fixed",l=F(t,!0,r,e);let c={scrollLeft:0,scrollTop:0};const f=$(0);if(n||!n&&!r)if((E(e)!=="body"||k(i))&&(c=B(e)),L(e)){const s=F(e,!0,r,e);f.x=s.x+e.clientLeft,f.y=s.y+e.clientTop}else i&&(f.x=dt(i));return{x:l.left+c.scrollLeft-f.x,y:l.top+c.scrollTop-f.y,width:l.width,height:l.height}}const Rt={getClippingRect:function(t){let{element:e,boundary:o,rootBoundary:n,strategy:i}=t;const r=o==="clippingAncestors"?function(s,p){const u=p.get(s);if(u)return u;let a=pt(s).filter(m=>R(m)&&E(m)!=="body"),d=null;const g=v(s).position==="fixed";let h=g?A(s):s;for(;R(h)&&!M(h);){const m=v(h),y=Y(h);y||m.position!=="fixed"||(d=null),(g?!y&&!d:!y&&m.position==="static"&&d&&["absolute","fixed"].includes(d.position)||k(h)&&!y&&gt(s,h))?a=a.filter(x=>x!==h):d=m,h=A(h)}return p.set(s,a),a}(e,this._c):[].concat(o),l=[...r,n],c=l[0],f=l.reduce((s,p)=>{const u=nt(e,p,i);return s.top=H(u.top,s.top),s.right=tt(u.right,s.right),s.bottom=tt(u.bottom,s.bottom),s.left=H(u.left,s.left),s},nt(e,c,i));return{width:f.right-f.left,height:f.bottom-f.top,x:f.left,y:f.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:o,strategy:n}=t;const i=L(o),r=C(o);if(o===r)return e;let l={scrollLeft:0,scrollTop:0},c=$(1);const f=$(0);if((i||!i&&n!=="fixed")&&((E(o)!=="body"||k(r))&&(l=B(o)),L(o))){const s=F(o);c=D(o),f.x=s.x+o.clientLeft,f.y=s.y+o.clientTop}return{width:e.width*c.x,height:e.height*c.y,x:e.x*c.x-l.scrollLeft*c.x+f.x,y:e.y*c.y-l.scrollTop*c.y+f.y}},isElement:R,getDimensions:function(t){return ft(t)},getOffsetParent:it,getDocumentElement:C,getScale:D,async getElementRects(t){let{reference:e,floating:o,strategy:n}=t;const i=this.getOffsetParent||it,r=this.getDimensions;return{reference:Tt(e,await i(o),n),floating:{x:0,y:0,...await r(o)}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>v(t).direction==="rtl"},St=(t,e,o)=>{const n=new Map,i={platform:Rt,...o},r={...i.platform,_c:n};return yt(t,e,{...i,platform:r})};export{St as B,Et as L,Ct as g};
