import{u as x,a as I}from"./vue-router-7dca9bdd.js";import{k as T,f as C,g as $}from"./index-4c5ea7d8.js";import{R as S,P as w,S as q}from"./@element-plus-b13bee2d.js";import{u as D}from"./home-3c6e23fa.js";import{s as N}from"./pinia-9bc35aa3.js";import{f as B,al as f,o as g,a as b,b as r,c as t,a8 as e,u as p,aa as R,r as z,g as y,ab as k,n as E}from"./@vue-9c35b395.js";import{_ as h}from"./index-27abbdca.js";import{_ as G}from"./TextEditor.vue_vue_type_style_index_0_lang-3005378c.js";import"./element-plus-db509607.js";import"./lodash-es-f35ec05a.js";import"./@vueuse-ffe6a0dc.js";import"./@popperjs-38034195.js";import"./@ctrl-fb5a5473.js";import"./dayjs-ab63237d.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./escape-html-2a4cb2fa.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-7cc3f4ab.js";/* empty css                     */import"./highlight.js-f63ffb7b.js";import"./ant-design-vue-b9441150.js";import"./@babel-aba2881e.js";import"./@ant-design-590e9d8f.js";import"./dom-align-ecb06dd6.js";import"./resize-observer-polyfill-0f9f8adb.js";import"./vue-types-ef06c517.js";import"./@emotion-f7664732.js";import"./stylis-fad5b415.js";import"./axios-4a70c6fc.js";import"./@tiptap-05fbaccf.js";import"./prosemirror-state-196a664c.js";import"./prosemirror-model-dd95f3ae.js";import"./orderedmap-1b52af60.js";import"./prosemirror-transform-8da7cd1c.js";import"./tippy.js-85fd885f.js";import"./prosemirror-view-90e8c06d.js";import"./prosemirror-dropcursor-450722bb.js";import"./prosemirror-gapcursor-b6f07352.js";import"./prosemirror-keymap-f78d9d43.js";import"./w3c-keyname-a25e4cc1.js";import"./prosemirror-history-2c775b3b.js";import"./rope-sequence-5ceeafee.js";import"./prosemirror-tables-cc8976a2.js";import"./prosemirror-commands-19b3babd.js";import"./prosemirror-schema-list-20593f03.js";import"./linkifyjs-32d7b0b9.js";import"./remixicon-0d963432.js";import"./lowlight-dcc438ad.js";import"./fault-884b1697.js";import"./format-0c58afb4.js";const U={class:"block"},V={key:0,class:"block"},A=B({__name:"BlogToolBar",props:{info:{}},setup(v){const i=v,l=x(),n=()=>{console.log("going back"),l.push({name:"blogs"})},s=()=>l.push({name:"update",params:{id:i.info.id}}),m=D(),{userinfo:a}=N(m),o=()=>T(i.info.id).then(c=>{l.push({name:"blogs"})});return(c,L)=>{const d=f("el-icon"),_=f("el-button"),u=f("el-tooltip");return g(),b("div",null,[r("div",U,[t(u,{class:"box-item",effect:"dark",content:"Go back",placement:"bottom-start"},{default:e(()=>[t(_,{onClick:n,circle:"",color:"#faebd7",size:"default",style:{border:"none"}},{default:e(()=>[t(d,null,{default:e(()=>[t(p(S))]),_:1})]),_:1})]),_:1})]),p(a).isAdmin||p(a).id===i.info.ownerId?(g(),b("div",V,[t(u,{class:"box-item",effect:"dark",content:"Delete",placement:"bottom-start"},{default:e(()=>[t(_,{onClick:o,circle:"",color:"#faebd7",size:"default",style:{border:"none"}},{default:e(()=>[t(d,null,{default:e(()=>[t(p(w))]),_:1})]),_:1})]),_:1}),t(u,{class:"box-item",effect:"dark",content:"Delete",placement:"bottom-start"},{default:e(()=>[t(_,{onClick:s,circle:"",color:"#faebd7",size:"default",style:{border:"none"}},{default:e(()=>[t(d,null,{default:e(()=>[t(p(q))]),_:1})]),_:1})]),_:1})])):R("",!0)])}}});const F=h(A,[["__scopeId","data-v-3862e7d4"]]),M={class:"page clearfix article",style:{"margin-top":"1em"}},O={class:"blog-content"},P={class:"ql-snow ql-container out_page"},j={class:"clearfix"},H={class:"time"},J={mounted(){E(()=>{document.querySelector(".editor__content").style.padding="0",document.querySelector(".editor").style.border="0"})}},K=B({...J,__name:"Blog",setup(v){const i=I(),l=parseInt(i.params.id),n=z({categoryId:1,content:"",createTime:"",headImg:"",id:0,isFinished:0,isTop:0,ownerId:0,ownerName:"",summary:"",tabs:"",title:"",updateTime:"",updateUserId:0}),s=y(""),m=y();return C(l).then(a=>{for(const o in a.blogInfo)n[o]=a.blogInfo[o];$(n.content).then(o=>{console.log("data: ",o.data),s.value=o.data,m.value.updateContent(s.value)}),console.log("blog_content: ",s.value)}),(a,o)=>(g(),b("div",M,[t(F,{info:n,"onUpdate:info":o[0]||(o[0]=c=>n=c)},null,8,["info"]),r("div",O,[r("div",P,[r("div",j,[r("h1",null,k(n.title),1),r("span",H,"上次更新时间: "+k(n.updateTime),1),t(G,{ref_key:"textEditor",ref:m,content:s.value,"onUpdate:content":o[1]||(o[1]=c=>s.value=c),editable:!1},null,8,["content"])])])])]))}});const Jt=h(K,[["__scopeId","data-v-d259f634"]]);export{Jt as default};
